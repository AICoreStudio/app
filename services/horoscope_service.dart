import 'dart:convert';
import 'dart:math';
import 'package:starweaver/models/horoscope.dart';
import 'package:starweaver/models/zodiac_sign.dart';

class HoroscopeService {
  static final Random _random = Random();

  static final List<String> _dailyTexts = [
    'Звезды сегодня особенно благосклонны к вам. Воспользуйтесь этой космической энергией для достижения своих целей.',
    'Сегодня ваша интуиция на пике. Доверьтесь внутреннему голосу при принятии важных решений.',
    'Планеты выстроились в благоприятной конфигурации. Это прекрасный день для новых начинаний.',
    'Луна в вашем знаке дарует особую силу. Используйте её мудро для преодоления препятствий.',
    'Космические ветры перемен приносят новые возможности. Будьте открыты к неожиданным предложениям.',
    'Сегодня ваша аура сияет особенно ярко. Это привлечет к вам нужных людей и благоприятные обстоятельства.',
  ];

  static final List<String> _loveTexts = [
    'В любви вас ждут приятные сюрпризы. Венера благоволит романтическим встречам.',
    'Отношения наполнятся новой энергией. Время для искренних разговоров с партнером.',
    'Одиночки могут встретить свою судьбу. Парам стоит уделить больше внимания друг другу.',
    'Любовная планета дарует страсть и нежность. Не бойтесь проявлять свои чувства.',
    'В сердечных делах возможны неожиданные повороты. Следуйте зову сердца.',
    'Ваша привлекательность сегодня неотразима. Используйте это во благо отношений.',
  ];

  static final List<String> _careerTexts = [
    'В профессиональной сфере открываются новые горизонты. Время действовать решительно.',
    'Марс дает энергию для карьерных свершений. Ваши усилия будут вознаграждены.',
    'Коллеги и начальство оценят ваш профессионализм. Это может привести к повышению.',
    'Творческие идеи найдут практическое применение. Не бойтесь предлагать инновации.',
    'Деловые переговоры пройдут успешно. Ваша убедительность будет на высоте.',
    'Время инвестировать в свое развитие. Новые навыки откроют дополнительные возможности.',
  ];

  static final List<String> _healthTexts = [
    'Энергетический баланс восстанавливается. Уделите внимание здоровому питанию.',
    'Физическая активность принесет особенную пользу. Найдите время для спорта.',
    'Стресс отступает благодаря гармонии планет. Практикуйте медитацию для укрепления духа.',
    'Ваша жизненная сила на подъеме. Используйте её для оздоровления организма.',
    'Луна благоприятствует детоксу. Очистите тело и разум от негатива.',
    'Природа зовет вас. Прогулки на свежем воздухе наполнят энергией.',
  ];

  static Future<Horoscope> getDailyHoroscope(ZodiacSign sign) async {
    await Future.delayed(const Duration(milliseconds: 500)); // Имитация API запроса
    
    return Horoscope(
      period: 'daily',
      text: _dailyTexts[_random.nextInt(_dailyTexts.length)],
      love: _loveTexts[_random.nextInt(_loveTexts.length)],
      career: _careerTexts[_random.nextInt(_careerTexts.length)],
      health: _healthTexts[_random.nextInt(_healthTexts.length)],
      rating: _random.nextInt(5) + 6, // От 6 до 10
    );
  }

  static Future<Horoscope> getWeeklyHoroscope(ZodiacSign sign) async {
    await Future.delayed(const Duration(milliseconds: 500));
    
    return Horoscope(
      period: 'weekly',
      text: 'Эта неделя принесет значительные перемены в вашу жизнь. Космические силы работают в вашу пользу, открывая новые пути развития. Планеты выстраиваются в благоприятной конфигурации, что способствует реализации давних планов.',
      love: 'Любовный гороскоп на неделю обещает глубокие эмоциональные переживания. Отношения выйдут на новый уровень понимания.',
      career: 'В профессиональной деятельности ожидаются прорывы. Ваши идеи найдут поддержку у руководства.',
      health: 'Общий тонус организма повысится. Рекомендуется заняться новым видом физической активности.',
      rating: _random.nextInt(3) + 7, // От 7 до 9
    );
  }

  static Future<Horoscope> getMonthlyHoroscope(ZodiacSign sign) async {
    await Future.delayed(const Duration(milliseconds: 500));
    
    return Horoscope(
      period: 'monthly',
      text: 'Месяц будет богат на события и возможности. Космические циклы входят в активную фазу, что благоприятствует всем начинаниям. Этот период станет поворотным в вашей судьбе, принеся долгожданные изменения к лучшему.',
      love: 'В сфере личных отношений месяц обещает быть насыщенным. Возможны судьбоносные встречи и важные решения в любви.',
      career: 'Карьерные перспективы расширяются. Появятся возможности для профессионального роста и смены деятельности.',
      health: 'Жизненная энергия будет на высоком уровне. Время для кардинальных изменений в образе жизни.',
      rating: _random.nextInt(2) + 8, // От 8 до 9
    );
  }
}